<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>media</title>
  <link rel="stylesheet" href="../static/bootstrap-3.3.7/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="../static/css/media.css">
  <script src='../static/js/jquery-3.3.1.min.js'></script>
  <script src='../static/bootstrap-3.3.7/dist/js/bootstrap.min.js'></script>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-2">
        <!-- search -->
        <div class="input-group">
          <span class=" glyphicon glyphicon-search"></span>
          <input type="text" onkeydown="onKeyDown(event)" placeholder="搜索" id='sreach' />
        </div>
      </div>
      <!-- date -->
      <div class="col-sm-4">
        <div class="time-choose">
          <span>创建时间:</span>
          <div class="input-time">
            <span>请选择日期</span>
            <span class='glyphicon glyphicon-list-alt' id='date'></span>
          </div>
          <!-- date-pop-up -->
          <ul class="date-pop-up">
            <li></li>
            <li></li>
            <li></li>
          </ul>
          <span>至</span>
          <div class="input-time">
            <span>请选择日期</span>
            <span class='glyphicon glyphicon-list-alt' id='date'></span>
          </div>
          <!-- date-pop-up -->
          <ul class="date-pop-up two">
            <li></li>
            <li></li>
            <li></li>
          </ul>
        </div>
      </div>
      <!-- shoose -->
      <div class="col-sm-2">
        <button class='btn btn-primary' id='select'>查询</button>
        <button class='btn btn-primary'>上传</button>
        <button class='btn btn-primary' id='del'>删除</button>
      </div>
    </div>
    <!-- del-pop-up -->
    <div class="row">
      <ul class='media'>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
        <li><img src="../static/images/media.jpg" alt=""><span>李国栋 2017.10.01</span></li>
      </ul>
    </div>
  </div>
  <!-- Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">确定删除？</h4>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id='readydel' data-dismiss="modal">确定</button>
        </div>
      </div>
    </div>
  </div>
</body>
<script>
  let ul = '<ul>';
  for (let i = 1; i < 13; i++) {
    ul += '<li>' + i + '</li>'
  }
  ul += '</ul>'
  $('.date-pop-up li').html(ul)
  let delclick = 0
  let delchoosearr = new Set();
  let mediaclick = false;
  $('#del').click(function () {
    if (delclick == 0) {
      $('.media li img').attr('src', '../static/images/medianochoose.jpg')
      $(this).attr({ 'data-toggle': "", 'data-target': "" })
      mediaclick = true;
      delclick = 1;
    } else {
      delclick = 0;
      $(this).attr({ 'data-toggle': "modal", 'data-target': "#myModal" })
      $('.media li img').attr('src', '../static/images/media.jpg')
    }
  })
  // on ready in del
  $('#readydel').click(function () {
    //del
    console.log(delchoosearr)
    for (let item of delchoosearr) {
      $('.media li').eq(item).remove();
    }
    //clear set
    delchoosearr = new Set();
  })
  $('.media').click(function (ev) {
    if (mediaclick) {
      if (ev.target.nodeName == 'IMG') {
        if ($(ev.target).attr('src') != '../static/images/mediachoose.jpg') {
          $(ev.target).attr('src', '../static/images/mediachoose.jpg')
          delchoosearr.add($(ev.target).parent().index());
        } else {
          $(ev.target).attr('src', '../static/images/medianochoose.jpg')
          delchoosearr.delete($(ev.target).parent().index())
        }
      }
    }

  })
  function onKeyDown(ev) {
    let html = '';
    if (ev.code == 'Enter') {
      for (let i = 0; i < $('.media li span').length; i++) {
        if ($('.media li span')[i].innerText.indexOf($('#sreach').val()) != -1) {
          html += '<li>' + $($('.media li span')[i]).parent().html() + '</li>';
        }
      }
      $('.media').empty();
      $('.media').html(html);
    }
  }
  // 搜索
  $('#select').click(function () {
    let html = '';
    for (let i = 0; i < $('.media li span').length; i++) {
      if ($('.media li span')[i].innerText.indexOf($('#sreach').val()) != -1) {
        html += '<li>' + $($('.media li span')[i]).parent().html() + '</li>';
      }
    }
    $('.media').empty();
    $('.media').html(html);
  })
  // 日期选择器
  $('.time-choose').click(function (ev) {
    if (ev.target.id == 'date') {
      $(ev.target).parent()
    }
  })
  $('.date-pop-up>li').click(function (ev) {
    console.log($(ev.scrolltop))
    $('.date-pop-up').mousedown(function (ev) {
      console.log(ev)
    })
  })

</script>

</html>